# 网络编程
# 基本概念
## socket

————创建一个socket相当于安装一部电话机

+ Socket（套接字）是一种网络编程中的编程接口（API），通常被用来实现端到端网络通信。
+ Socket接口提供了对TCP/IP协议的访问能力，从而允许应用程序使用TCP或UDP协议在网络上发送和接收数据。

+ 在网络编程中，Socket常用于两个或多个计算机之间进行数据交互。

+ 在发送数据之前，先创建一个Socket对象，指定协议类型、IP地址、端口号等参数，然后通过Socket对象的接口来传输数据。

Socket有两种类型：面向连接的Socket和无连接的Socket。
+ 面向连接的Socket通常使用TCP协议，它提供了可靠的数据传输机制和数据流的概念；
+ 无连接的Socket通常使用UDP协议，它不保证数据传输的可靠性，但是具有较高的传输速度和较低的延迟。

+ 在编写网络程序时，Socket接口提供了一系列的函数，包括创建Socket、绑定Socket、监听Socket、连接Socket、发送数据和接收数据等。通过这些函数，程序可以更加方便地实现Socket网络编程。
## C/S模式
1、客户机/服务器模式在操作过程中采取主动请求的方式。

2、服务器端:

+ 首先服务器先启动，并根据请求提供相应的服务:

+ 打开一个通信通道，在某一地址和端口上接收请求等待客户请求到达该端口。

+ 接收到重复服务请求，处理该请求并发送应答信号

+ 返回第二步，等待另一客户请求。

+ 关闭服务器。

3、客户端:

+ 打开一个通信通道，并连接到服务器所在主机的特定端口。

+ 向服务器发服务请求，等待并接收应答;继续提出请求。

+ 请求结束后关闭通信通道并终止。

## 面向连接和面向消息
1、 面向连接（传送带）：TCP
+ 只要网络不出问题，传输过程数据不会丢失
+ 按顺序
+ 没有数据边界（不管传多少次、一次传多少，接收到规定数量的数据就结束）
  
2、面向消息（送快递）：
+ 传输速度快
+ 数据可能丢失或损毁
+ 无顺序
+ 每次传输数据大熊啊有限制
+ 有数据限制
## IP地址和端口
1、 IP地址:

+ 是分配给用户上网使用的**网际协议**

+ 常见的IP地址分为**IPv4**与**IPv6**两大类，但是也有其他不常用的小分类

+ 地址就好像街道地址（地址码):有了某人的街道地址，你就能找到他并宜与他通信了。同样，有了某台主机的IP地址，你就能与这台主机通信了。

2、 Port:
+ 为区分程序中创建的套接字而分配给套接字的**序号**

+ 如果把IP地址比作房子，端口就是出入房子的门。真正的房子只有几个门，但端口可以有65536(即:2^16)个之多

+ ·0-1023─般被用作知名服务器的端口，被预定，如FTP、HTTP、SMTP等)的port号来进行! **wwW选择80而FTP则以21为正常的联机信道**

# 套接字类型与协议设置
1、SOCK_STREAM[流套接字]    TCP

面向连接、可靠的数据传输    适合传输大量的数据，不支持广播、多播

2、SOCK_DGRAM[数据包套接字]   UDP

无连接    支持广播、多播

3、SOCK_RAW[原始套接字]

可以读写内核没有处理的IP数据报

避开TCP/IP处理机制，被传送的数据报可以被直接传送给需要它的的应用程序

# 网络编程基本函数和基本数据结构
|函数名称|功能描述|
|------|------|
|socket|创建套接字|
|bind|套接字与本地IP地址和端口号的绑定|
|connect|请求连接|
|listen|侦听连接请求|
|accept|接受连接请求|
|send|往**已建立连接**的套接字上发送数据|
|recv|从**已建立连接**的套接字上接收数据|
|sendto|在**无连接**的套接字上发送数据|
|recvform|在**无连接**的套接字上接受数据|
|close|关闭套接字|
+ socket创建套接字相当于创建了一个“电话机”
+ bind需要IP地址和端口
+ send、recv：TCP  （有连接）
+ sendto、recvform：UDP  （无连接）

数据结构
```c++
struct sockaddr {
u_short    sa_family;  	        //16位地址类型 2字节 ， 指定协议族（IPV4，IPV6）
char       sa_data[14];            //14字节地址数据：ip + port（IP地址和端口混合使用）
};   //16字节

struct sockaddr_in {
short   sin_family;			//16位地址类型 ，指定协议族（IPV4，IPV6）
u_short sin_port;			//16位端口号 65535  2的16次方
struct  in_addr sin_addr;   //32位IP地址  4字节
char    sin_zero[8];		//8字节填充
};   //16字节
```


